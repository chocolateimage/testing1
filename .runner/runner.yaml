events:
  push:
    tasks:
      - test
      - build
      - check
      - alot1
      - alot2
      - alot3

tasks:
  build:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
    label: 🛠️ Build
  test:
    build: .runner/test.Dockerfile
    base: blank
    depends:
      - build
    imports:
      - build:/app/builddir:/build
      - build:/app/tools/test.sh:/
    label: 📝 Test
  check:
    build: .runner/check.Dockerfile
    label: ✅ Checking
  alot1_build1:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot1_build2:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot1_build3:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot2_build1:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot2_build2:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot2_build3:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot3_build1:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot3_build2:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot3_build3:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
  alot1:
    build: .runner/test.Dockerfile
    imports:
      - alot1_build1:/app/builddir:/build
      - alot1_build2:/app/tools/test.sh:/
    depends:
      - alot1_build1
      - alot1_build2
      - alot1_build3
  alot2:
    build: .runner/test.Dockerfile
    imports:
      - alot2_build1:/app/builddir:/build
      - alot2_build2:/app/tools/test.sh:/
    depends:
      - alot2_build1
      - alot2_build2
      - alot2_build3
  alot3:
    build: .runner/test.Dockerfile
    imports:
      - alot3_build1:/app/builddir:/build
      - alot3_build2:/app/tools/test.sh:/
    depends:
      - alot3_build1
      - alot3_build2
      - alot3_build3