events:
  push:
    tasks: ["test", "check"]

tasks:
  build:
    build: .runner/build.Dockerfile
    publish:
      - /app/builddir/testing1
    label: 🛠️ Build
  test:
    build: .runner/test.Dockerfile
    base: blank
    depends:
      - build
    imports:
      - build:/app/builddir:/build
      - build:/app/tools/test.sh:/
    publish:
      - /usr/bin
  check:
    build: .runner/check.Dockerfile
    label: ✅ Checking